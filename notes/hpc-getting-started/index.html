<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>1 - HPC getting started - STAT-5526 Fall 2020</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="1 - HPC getting started" />
<meta property="og:description" content="




Here are some minimal steps to get on ARC clusters and validate your account is setup properly.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://rsettlage.github.io/STAT5526_Fall2020/notes/hpc-getting-started/" />
<meta property="article:published_time" content="2020-11-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-11-05T00:00:00+00:00" />

	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/STAT5526_Fall2020/css/style.css">
	
	<link rel="shortcut icon" href="/STAT5526_Fall2020/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/STAT5526_Fall2020/" title="STAT-5526 Fall 2020" rel="home">
				<div class="logo__title">STAT-5526 Fall 2020</div>
				<div class="logo__tagline">Official place to find HPC course material.</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/">Home</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/topics">Topics</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/posts">posts</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/homework">homework</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="https://github.com/rsettlage/STAT5526_Fall2020/tree/master/rmd">Rmd</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/homework-submit">Submitting homework</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/notes">notes</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/STAT5526_Fall2020/about/">About</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">1 - HPC getting started</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2020-11-05T00:00:00">November 05, 2020</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="/STAT5526_Fall2020/categories/course-logistics" rel="category">Course Logistics</a></span>
</div>
</div>
		</header><div class="content post__content clearfix">
			<div id="vpn" class="section level2">
<h2>VPN</h2>
<p>If off VT’s Blacksburg (and soon Roanoke) campus, you must have the VPN going. Without getting too geeky, this basically makes it appear that you are on campus by routing your internet traffic through VT servers. In case you are wondering, most of the articles you are wanting to read that are looking for a subscription will magically show up with your VPN on.</p>
<p><a href="https://vt4help.service-now.com/sp?id=kb_article&amp;sys_id=d5496fca0f8b4200d3254b9ce1050ee5" class="uri">https://vt4help.service-now.com/sp?id=kb_article&amp;sys_id=d5496fca0f8b4200d3254b9ce1050ee5</a></p>
</div>
<div id="arc-user-name-and-password" class="section level2">
<h2>ARC user name and password</h2>
<p>I have set this up for you. Please user your pid and password like you were logging into Canvas.</p>
</div>
<div id="access-the-clusters" class="section level2">
<h2>Access the clusters</h2>
<p>We are going to use Open OnDemand (OOD). Via your browser (Chrome or Firefox), go to:
<a href="https://ood.arc.vt.edu/pun/sys/dashboard" class="uri">https://ood.arc.vt.edu/pun/sys/dashboard</a>.</p>
</div>
<div id="validate-rstudio-on-arc-works-for-you" class="section level2">
<h2>Validate Rstudio on ARC works for you</h2>
<p>From the OOD menus, choose “Interactive Apps” and Rstudio. Fill out the form to match the below. We are using partition=<code>normal_q</code> and Account=<code>stat5526-fall2020</code>.</p>
<p>Click launch, wait for the Rstudio button to show up blue. Click on it to launch Rstudio. Create a new Rmarkdown file, choose the PDF option, and just knit the default document to PDF. If the PDF pops up, things are working.</p>
<div class="figure">
<img src="../img/OODsetup.png" alt="" />
<p class="caption">OOD setup</p>
</div>
</div>
<div id="validate-you-can-start-a-job-from-the-command-line" class="section level2">
<h2>Validate you can start a job from the command line</h2>
<p>Here we are going to create a script we will submit to the scheduler manually.</p>
<p>In Rstudio, choose file, new, text file. Copy and paste the code at the end of this document in that file and save it as <code>SLURM_basic_job.sh</code>.</p>
<p>Now, back in OOD, choose the menu item “Clusters”, then “TinkerCliffs Shell Access”. In that window, type:</p>
<p><code>sbatch SLURM_basic_job.sh</code></p>
<p>Hopefully it will say something like job ### submitted where the ### number is the assigned job id. If it does, you can watch its progress by typing:</p>
<p><code>squeue</code> and looking for you and that job id.</p>
<p>When the job no longer shows up in the squeue list, you can look for the output in the current directory by typing:</p>
<p><code>ls -l</code> and looking for a file named <code>slurm-###.out</code>. You can view that output by opening in via the Rstudio interface OR by simly typing <code>cat slurm-###.out</code>.</p>
<pre class="bash"><code>
#!/bin/bash

###########################################################################
##
## sbatch SLURM_basic_job.sh
##
###########################################################################

####### job customization
#SBATCH --job-name=R_test
#SBATCH -N 1
#SBATCH -c 8                         #this sets SLURM_CPUS_ON_NODE
#SBATCH -t 00:15:00
#SBATCH -p normal_q
#SBATCH -A stat5526-fall2020
###SBATCH --mail-user=rsettlag@vt.edu #uncomment and change if you want emails
#SBATCH --mail-type=FAIL

###########################################################################
date
cluster=${SLURM_CLUSTER_NAME}
echo running on $cluster cluster in node `hostname`
echo in job $SLURM_JOB_ID
echo with tmpfs $TMPFS
echo with tmpdir $TMPDIR

## starting the script, need day
start=$(date +%s)
today=$(date &#39;+%D %T&#39;)
echo $today

#####################################

module load containers/singularity
singularity exec --bind $TMPFS:/tmp,/sys/fs/cgroup/cpuset/slurm/uid_$(id -u):/job_sets \
            /projects/arcsingularity/ood-rstudio-basic_4.0.0.sif Rscript -e &quot;5+3&quot;
</code></pre>
</div>

		</div>
		
<div class="post__tags tags clearfix">
	<svg class="tags__icon icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/STAT5526_Fall2020/tags/r/" rel="tag">R</a></li>
	</ul>
</div>
	</article>
</main>




			</div>
			<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="http://rsettlage.github.io/STAT5526_Fall2020/" />
	</form>
</div>
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/posts/lecture-1a/">Lecture 1A - HPC Cluster Organization</a></li>
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/posts/lecture-1b/">Lecture 1B - Scheduler/Software/Storage</a></li>
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/posts/lecture-1c/">Lecture 1C - Containers and R</a></li>
		</ul>
	</div>
</div>
<div class="widget-categories widget">
	<h4 class="widget__title">Categories</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/categories/course-logistics">Course logistics</a></li>
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/categories/homework">Homework</a></li>
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/categories/lecture1">Lecture1</a></li>
			<li class="widget__item"><a class="widget__link" href="/STAT5526_Fall2020/categories/lecture2">Lecture2</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/containers" title="Containers">Containers</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/git" title="Git">Git</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/gp" title="Gp">Gp</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/homework" title="Homework">Homework</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/hpc" title="Hpc">Hpc</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/keras" title="Keras">Keras</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/monte-carlo" title="Monte carlo">Monte carlo</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/neural-networks" title="Neural networks">Neural networks</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/parallelizing" title="Parallelizing">Parallelizing</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/r" title="R">R</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/r-setup" title="R setup">R setup</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/scheduler" title="Scheduler">Scheduler</a>
		<a class="widget-taglist__link widget__link btn" href="/STAT5526_Fall2020/tags/topics" title="Topics">Topics</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 STAT-5526 Fall 2020.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
			<script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      </script>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/STAT5526_Fall2020/js/menu.js"></script></body>
</html>